name: GitHub Shemaspy test
on: [push]
jobs:
  schemaspy:
    runs-on: ubuntu-latest
    steps:
        - uses: actions/checkout@v2
        - name: compose-run
          shell: bash
          run: |
            docker-compose up -d
            sleep 60s
        - name: migrate
          shell: bash
          run: |
            docker exec -t test-django python manage.py migrate
            sleep 60s
        - name: compose-schemaspy
          shell: bash
          run: |
            docker-compose up -d schemaspy 
            sleep 120s
        - name: file-check
          shell: bash
          run: |
            ls -a schemaspy/
            ls -a schemaspy/output/
        - name: file-check-2
          shell: bash
          run: |
            ls -a schemaspy/output/